{"version":3,"sources":["actions/config.js","actions/index.js","App.js","reducers/index.js","index.js"],"names":["config","window","location","origin","actionId","loading","id","type","App","props","loadImages","state","pageNo","pageSize","imageLoaded","bind","this","setState","Object","assign","stop","document","execCommand","index","urls","url","length","images","className","layout","currentPage","total","onCurrentChange","updatePageNo","load","map","item","key","src","alt","React","Component","getImagesFromState","isLoading","connect","dispatch","a","axios","method","BASEURL","params","result","console","log","data","status","getImages","combineReducers","action","i18n","use","locale","logger","createLogger","store","createStore","reducer","applyMiddleware","thunkMiddleware","ReactDOM","render","getElementById"],"mappings":"8WAUeA,EARF,CAGX,QAJQC,OAAOC,SAASC,OAKxB,KANW,QCETC,EAAW,EAQR,SAASC,EAAQA,GACtB,MAAO,CACLC,GAAIF,IACJG,KAAM,UACNF,W,ICREG,E,kDACJ,WAAYC,GAAO,IAAD,6BAChB,cAAMA,IAGDA,MAAMC,WAFE,EACE,KAEf,EAAKC,MAAQ,CACXC,OAJW,EAKXC,SAJa,KAMf,EAAKC,YAAc,EAAKA,YAAYC,KAAjB,gBATH,E,yDAWLH,GAAQ,IAAD,OAClBI,KAAKC,UAAS,SAAAN,GACIO,OAAOC,OAAO,GAAGR,GACvBC,OAASA,KACnB,WACAX,OAAOmB,OACPC,SAASC,YAAY,QAAQ,GAC7B,EAAKb,MAAMC,WAAW,EAAKC,MAAMC,OAAQ,EAAKD,MAAME,e,kCAuB5CU,GACV,GAAIA,EAAM,EAAKP,KAAKL,MAAME,UAAYG,KAAKL,MAAMa,KAAKD,GAAOE,IAAIC,OAAS,EAAE,CAC1E,IAAID,EAAMT,KAAKL,MAAMgB,OAAOJ,EAAM,GAAGE,IACjCD,EAAI,YAAOR,KAAKL,MAAMa,MAC1BA,EAAKD,EAAM,GAAGE,IAAMA,EACpBT,KAAKC,SAAS,CACZO,Y,+BAIG,IAAD,OAEN,OACE,6BACE,kBAAC,aAAD,CAAYI,UAAU,aAAaf,SAAUG,KAAKL,MAAME,SAAUgB,OAAQ,4BACxEC,YAAad,KAAKL,MAAMC,OAAQmB,MAAO,KACvCC,gBAAiBhB,KAAKiB,aAAalB,KAAKC,QAEzC,yBAAKY,UAAU,aACbZ,KAAKP,MAAMyB,KAAO,kBAAC,UAAD,MAAsBlB,KAAKP,MAAMkB,OAAOQ,KAAI,SAACC,EAAKb,GACnE,OACE,yBAAKK,UAAU,QAAQS,IAAK,EAAK1B,MAAMC,OAAO,EAAKD,MAAME,SAAWU,GAClE,yBAAKe,IAAKF,EAAKX,IAAKc,IAAKhB,c,GAhEvBiB,IAAMC,WA2ElBC,EAAqB,SAAA/B,GAAK,OAAIA,EAAMgB,QACpCgB,EAAY,SAAAhC,GAAK,OAAIA,EAAMN,SAQlBuC,eAPS,SAAAjC,GAAK,MAAK,CAChCgB,OAAQe,EAAmB/B,GAC3BuB,KAAMS,EAAUhC,OAES,SAAAkC,GAAQ,MAAK,CACtCnC,WAAY,SAACE,EAAOC,GAAR,OAAqBgC,EDvE5B,SAAmBjC,EAAQC,GAChC,8CAAO,WAAegC,GAAf,eAAAC,EAAA,6DACLD,EAASxC,GAAQ,IADZ,SAEc0C,IAAM,CACvBC,OAAQ,MACRvB,IAAKzB,EAAOiD,QAAQ,aACpBC,OAAO,CACLtC,SACAC,cAPC,OAEDsC,EAFC,OAULC,QAAQC,IAAIF,EAAOG,MACO,SAAvBH,EAAOG,KAAKC,QACbV,GA3BoBlB,EA2BDwB,EAAOG,KAAKA,KA1B5B,CACLhD,GAAIF,IACJG,KAAM,aACNoB,YAyBAkB,EAASxC,GAAQ,IAdZ,iCAfF,IAAmBsB,IAejB,OAAP,sDCsE0C6B,CAAU5C,EAAOC,QAE9C+B,CAA4CpC,G,QC1E5CiD,cAAgB,CAC7B9B,OAba,WAAyB,IAAxBhB,EAAuB,uDAAf,GAAI+C,EAAW,uCACrC,MAAmB,eAAhBA,EAAOnD,KACD,YAAImD,EAAO/B,QAEbhB,GAUPN,QARc,WAA4B,IAA3BM,EAA0B,wDAAX+C,EAAW,uCACzC,MAAkB,WAAfA,EAAOnD,KACDmD,EAAOrD,QAETM,K,2BCETgD,OAAKC,IAAIC,KAET,IAAMC,EAASC,yBAETC,EAAQC,YAAYC,EACxBC,YACEC,IACAN,IAEFO,IAASC,OACT,kBAAC,IAAD,CAAUN,MAAOA,GACf,kBAAC,EAAD,OAEF3C,SAASkD,eAAe,W","file":"static/js/main.4d514690.chunk.js","sourcesContent":["const PORT = '9000';\nlet url = window.location.origin\nvar config = {\n    \n  // \"BASEURL\":`http://localhost:3002`,\n  \"BASEURL\": url,\n  \"PORT\": PORT\n  \n}\n\nexport default config;","import axios from 'axios';\nimport config from \"./config\";\nlet actionId = 1\nexport function setImages(images){\n  return {\n    id: actionId++,\n    type: 'set_images',\n    images\n  }\n}\nexport function loading(loading){\n  return {\n    id: actionId++,\n    type: 'loading',\n    loading\n  }\n}\nexport function getImages(pageNo, pageSize){\n  return async function(dispatch){\n    dispatch(loading(true))\n    let result = await axios({\n      method: \"get\",\n      url: config.BASEURL+\"/getImages\",\n      params:{\n        pageNo,\n        pageSize\n      }\n    })\n    console.log(result.data)\n    if(result.data.status === 'PASS')\n      dispatch(setImages(result.data.data))\n\n    dispatch(loading(false))\n  }\n}","import React from 'react';\nimport \"element-theme-default\"\nimport './App.css';\nimport {Pagination, Loading} from'element-react' \nimport {connect} from 'react-redux'\nimport {getImages} from \"./actions\";\nclass App extends React.Component{\n  constructor(props){\n    super(props);\n    let pageNo = 1;\n    let pageSize = 100;\n    this.props.loadImages(pageNo,pageSize);    \n    this.state = {\n      pageNo,\n      pageSize,\n    }\n    this.imageLoaded = this.imageLoaded.bind(this);\n  }\n  updatePageNo(pageNo){\n    this.setState(state => {\n      let tempState = Object.assign({},state);\n      tempState.pageNo = pageNo;\n    },() => {\n      window.stop();\n      document.execCommand(\"Stop\", false);\n      this.props.loadImages(this.state.pageNo, this.state.pageSize)\n    })\n    // let urls = []\n    // for(let i=0;i<this.state.pageSize;i++){\n    //   urls.push({url: ''})\n    // }\n    // this.setState({\n    //   urls\n    // })\n    // setTimeout(() => {\n    //   let pageSize = this.state.pageSize;\n    //   let images = [...imagesJson.slice((pageNo-1)*pageSize,pageNo*pageSize)];\n    //   urls = [{url: images[0].url}];\n    //   for(let i=1;i<this.state.pageSize;i++){\n    //     urls.push({url: ''})\n    //   }\n    //   this.setState({\n    //     pageNo,\n    //     images,\n    //     urls\n    //   })\n    // },1000)\n  }\n  imageLoaded(index){\n    if((index+1) < this.state.pageSize && this.state.urls[index].url.length > 0){\n      let url = this.state.images[index+1].url;\n      let urls = [...this.state.urls]\n      urls[index+1].url = url;\n      this.setState({\n        urls\n      })\n    }\n  }\n  render(){\n    \n    return(\n      <div>\n        <Pagination className=\"pagination\" pageSize={this.state.pageSize} layout={\"prev, pager, next, jumper\"}\n          currentPage={this.state.pageNo} total={21000}\n          onCurrentChange={this.updatePageNo.bind(this)}\n        />\n         <div className=\"container\">\n          {this.props.load ? <Loading></Loading> : this.props.images.map((item,index) => {\n            return (\n              <div className=\"Image\" key={this.state.pageNo*this.state.pageSize + index}>\n                <img src={item.url} alt={index} \n                // onLoad={() => this.imageLoaded(index)}\n                ></img>\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n}\nconst getImagesFromState = state => state.images;\nconst isLoading = state => state.loading;\nconst mapStateToProps = state => ({\n  images: getImagesFromState(state),\n  load: isLoading(state)\n})\nconst mapDispatchToProps = dispatch => ({\n  loadImages: (pageNo,pageSize) => dispatch(getImages(pageNo,pageSize))\n})\nexport default connect(mapStateToProps,mapDispatchToProps)(App);\n","import {\n  combineReducers\n} from \"redux\";\n\nconst images = (state = [], action) => {\n  if(action.type === 'set_images'){\n    return [...action.images];\n  }\n  return state;\n}\nconst loading = (state = false, action) => {\n  if(action.type == 'loading'){\n    return action.loading;\n  }\n  return state;\n}\nexport default combineReducers({\n  images,\n  loading\n});","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reducer from \"./reducers\"\nimport { createStore, applyMiddleware } from \"redux\";\nimport locale from '../node_modules/element-react/src/locale/lang/en'\n\n//Wrap App in provider to provide store to all components\nimport {Provider} from 'react-redux'\n\n//add midleware to actions to dispatch async actions\nimport thunkMiddleware from 'redux-thunk';\nimport {createLogger} from 'redux-logger';\n\nimport { i18n } from 'element-react'\ni18n.use(locale);\n\nconst logger = createLogger();\n\nconst store = createStore(reducer,\n  applyMiddleware(\n    thunkMiddleware,\n    logger\n  ))\n  ReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>, \n  document.getElementById('root')\n);\n"],"sourceRoot":""}